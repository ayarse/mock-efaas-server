<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>neFaas - Mock OIDC Server for eFaas Development &amp; Testing</title>
    <style>
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      :root {
        --primary: #12469a;
        --primary-dark: #0d3577;
        --primary-light: #e8eef7;
        --amber: #f59e0b;
        --amber-bg: #fef3c7;
        --amber-border: #fcd34d;
        --amber-text: #92400e;
        --gray-50: #f9fafb;
        --gray-100: #f3f4f6;
        --gray-200: #e5e7eb;
        --gray-300: #d1d5db;
        --gray-400: #9ca3af;
        --gray-500: #6b7280;
        --gray-700: #374151;
        --gray-900: #111827;
        --radius: 10px;
      }
      body {
        font-family:
          "Segoe UI",
          system-ui,
          -apple-system,
          sans-serif;
        background: var(--gray-100);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        color: var(--gray-900);
      }

      /* Navbar */
      .navbar {
        background: #fff;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        padding: 12px 24px;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .navbar img {
        height: 36px;
        width: auto;
      }
      .navbar-text {
        font-size: 14px;
        color: var(--gray-400);
        margin-left: auto;
      }

      /* Hero */
      .hero {
        background: linear-gradient(135deg, var(--primary) 0%, #1a56b8 100%);
        color: #fff;
        text-align: center;
        padding: 64px 24px;
      }
      .hero h1 {
        font-size: 36px;
        font-weight: 700;
        margin-bottom: 12px;
      }
      .hero p {
        font-size: 18px;
        opacity: 0.85;
        max-width: 560px;
        margin: 0 auto 24px;
        line-height: 1.6;
      }
      .hero-badge {
        display: inline-block;
        background: var(--amber);
        color: var(--amber-text);
        font-size: 13px;
        font-weight: 600;
        padding: 6px 16px;
        border-radius: 99px;
      }

      /* Content */
      .content {
        max-width: 900px;
        margin: 0 auto;
        padding: 48px 24px;
        flex: 1;
      }

      /* Endpoints section */
      .section-title {
        font-size: 22px;
        font-weight: 700;
        margin-bottom: 8px;
      }
      .section-subtitle {
        font-size: 14px;
        color: var(--gray-500);
        margin-bottom: 20px;
      }
      .endpoint-table {
        width: 100%;
        background: #fff;
        border-radius: var(--radius);
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        overflow: hidden;
        margin-bottom: 48px;
      }
      .endpoint-table table {
        width: 100%;
        border-collapse: collapse;
      }
      .endpoint-table th {
        text-align: left;
        padding: 12px 20px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: var(--gray-500);
        background: var(--gray-50);
        border-bottom: 1px solid var(--gray-200);
      }
      .endpoint-table td {
        padding: 10px 20px;
        font-size: 14px;
        border-bottom: 1px solid var(--gray-100);
      }
      .endpoint-table tr:last-child td {
        border-bottom: none;
      }
      .method {
        display: inline-block;
        font-size: 11px;
        font-weight: 700;
        padding: 2px 8px;
        border-radius: 4px;
        font-family: "SF Mono", "Consolas", monospace;
      }
      .method-get {
        background: #d1fae5;
        color: #065f46;
      }
      .method-post {
        background: #dbeafe;
        color: #1e40af;
      }
      .endpoint-path {
        font-family: "SF Mono", "Consolas", monospace;
        font-size: 13px;
        color: var(--gray-700);
      }
      .endpoint-path a {
        color: var(--primary);
        text-decoration: none;
      }
      .endpoint-path a:hover {
        text-decoration: underline;
      }

      /* Mock users */
      .users-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 12px;
        margin-bottom: 48px;
      }
      .user-card {
        background: #fff;
        border-radius: 8px;
        padding: 14px 18px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .user-card .name {
        font-weight: 600;
        font-size: 14px;
      }
      .user-card .id {
        font-family: "SF Mono", "Consolas", monospace;
        font-size: 13px;
        color: var(--gray-500);
      }
      .user-card .badge {
        font-size: 11px;
        padding: 2px 8px;
        border-radius: 99px;
        background: var(--primary-light);
        color: var(--primary);
        white-space: nowrap;
      }

      /* Quick start */
      .quickstart {
        background: #fff;
        border-radius: var(--radius);
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        padding: 28px;
        margin-bottom: 48px;
      }
      .quickstart h3 {
        font-size: 16px;
        margin-bottom: 16px;
      }
      .quickstart code {
        display: block;
        background: var(--gray-900);
        color: #e5e7eb;
        padding: 16px 20px;
        border-radius: 8px;
        font-family: "SF Mono", "Consolas", monospace;
        font-size: 13px;
        line-height: 1.7;
        overflow-x: auto;
        white-space: pre;
      }
      .quickstart .hint {
        font-size: 13px;
        color: var(--gray-500);
        margin-top: 12px;
      }

      /* Footer */
      footer {
        text-align: center;
        padding: 24px;
        font-size: 13px;
        color: var(--gray-400);
        border-top: 1px solid var(--gray-200);
      }

      @media (max-width: 700px) {
        .features {
          grid-template-columns: 1fr;
        }
        .hero h1 {
          font-size: 28px;
        }
        .hero p {
          font-size: 16px;
        }
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <img src="/public/nefaas_logo_blue.svg" alt="neFaas" height="36" />
    </nav>

    <div class="hero">
      <h1>neFaas Mock Server</h1>
      <p>
        A mock OIDC server that works like the eFaas developer environment. Use
        it locally or in CI for development and testing.
      </p>
      <span class="hero-badge">Mock Development &amp; Testing</span>
    </div>

    <div class="content">
      <!-- Endpoints -->
      <h2 class="section-title">Endpoints</h2>
      <p class="section-subtitle">
        All standard eFaas OIDC endpoints are available.
      </p>
      <div class="endpoint-table">
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Path</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="method method-get">GET</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/.well-known/openid-configuration"
                  >/.well-known/openid-configuration</a
                >
              </td>
              <td>OIDC Discovery</td>
            </tr>
            <tr>
              <td><span class="method method-get">GET</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/.well-known/openid-configuration/jwks"
                  >/.well-known/openid-configuration/jwks</a
                >
              </td>
              <td>JSON Web Key Set</td>
            </tr>
            <tr>
              <td><span class="method method-get">GET</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/connect/authorize">/connect/authorize</a>
              </td>
              <td>Authorization</td>
            </tr>
            <tr>
              <td><span class="method method-post">POST</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/connect/token">/connect/token</a>
              </td>
              <td>Token</td>
            </tr>
            <tr>
              <td><span class="method method-get">GET</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/connect/userinfo">/connect/userinfo</a>
              </td>
              <td>UserInfo</td>
            </tr>
            <tr>
              <td><span class="method method-get">GET</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/connect/endsession"
                  >/connect/endsession</a
                >
              </td>
              <td>End Session</td>
            </tr>
            <tr>
              <td><span class="method method-post">POST</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/connect/revocation"
                  >/connect/revocation</a
                >
              </td>
              <td>Token Revocation</td>
            </tr>
            <tr>
              <td><span class="method method-post">POST</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/connect/introspect"
                  >/connect/introspect</a
                >
              </td>
              <td>Token Introspection</td>
            </tr>
            <tr>
              <td><span class="method method-get">GET</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/efaas/Account/Login"
                  >/efaas/Account/Login</a
                >
              </td>
              <td>Login UI</td>
            </tr>
            <tr>
              <td><span class="method method-get">GET</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/api/user/photo/:sub"
                  >/api/user/photo/:sub</a
                >
              </td>
              <td>User Photo</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Mock Admin -->
      <h2 class="section-title">Mock Admin API</h2>
      <p class="section-subtitle">Manage mock server state at runtime.</p>
      <div class="endpoint-table">
        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Path</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="method method-get">GET</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/mock/health">/mock/health</a>
              </td>
              <td>Health check</td>
            </tr>
            <tr>
              <td><span class="method method-get">GET</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/mock/users">/mock/users</a>
              </td>
              <td>List mock users</td>
            </tr>
            <tr>
              <td><span class="method method-post">POST</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/mock/one-tap-codes"
                  >/mock/one-tap-codes</a
                >
              </td>
              <td>Generate one-tap login code</td>
            </tr>
            <tr>
              <td><span class="method method-post">POST</span></td>
              <td class="endpoint-path">
                <a href="__BASE_URL__/mock/clients">/mock/clients</a>
              </td>
              <td>Register a client</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Mock Users -->
      <h2 class="section-title">Mock Users</h2>
      <p class="section-subtitle">
        Pre-loaded test users. Default password:
        <code
          style="
            background: var(--gray-200);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 13px;
          "
          >__MOCK_PASSWORD__</code
        >
      </p>
      <div class="users-grid" id="usersGrid">__MOCK_USERS__</div>

      <!-- Quick Start -->
      <div class="quickstart">
        <h3>Quick Start</h3>
        <code
          >OIDC_ISSUER=__BASE_URL__ CLIENT_ID=mock-efaas-client
          CLIENT_SECRET=mock-secret</code
        >
        <p class="hint">
          Point your app's OIDC provider to this server. Works as a drop-in
          replacement for the eFaas dev environment â€” accepts any client and
          returns signed JWTs.
        </p>
      </div>
    </div>

    <footer>neFaas Mock Server</footer>
  </body>
</html>
